# RS-07: Boundary Collapse Simulation

**Status:** Open  
**Priority:** High  
**Risk ID:** B2

## Goal

Создать симулятор разрушения TAD-границ при различных условиях и предсказать риск enhancer hijacking.

## Background

TAD границы могут разрушаться при:
- Локальном метилировании CpG сайтов
- Мутациях CTCF сайтов
- TE insertions (особенно WAPL-recruiting)
- Образовании G4 или Z-DNA структур
- Конкуренции транскрипции

Разрушение границ приводит к:
- Enhancer hijacking (неправильные контакты)
- Онкогенные контакты (например, MYC enhancer → TERT)
- Изменение экспрессии генов

## Research Question

**Когда и почему TAD граница разрушается, и какие последствия это имеет?**

## Method

### 1. Collapse Conditions

Моделировать условия разрушения:
- **Methylation collapse**: CpG метилирование → CTCF inactivation → boundary loss
- **CTCF mutation**: Снижение силы CTCF сайта
- **TE insertion**: WAPL-recruiting sequences разрушают границы
- **Non-B DNA**: G4/Z-DNA могут создавать новые барьеры или разрушать старые
- **Transcription competition**: Активная транскрипция конкурирует с экструзией

### 2. Collapse Dynamics

Моделировать динамику разрушения:
- Постепенное ослабление (methylation accumulation)
- Резкое разрушение (CTCF mutation, TE insertion)
- Временная динамика (когда граница разрушается)

### 3. Consequences Prediction

Предсказать последствия:
- **Enhancer hijacking**: Контакты между enhancer и неправильным промотором
- **Oncogenic contacts**: Контакты, связанные с раком
- **Gene expression changes**: Изменение экспрессии из-за новых контактов

### 4. Risk Scoring

Создать систему оценки рисков:
- **Collapse probability**: Вероятность разрушения границы
- **Hijacking risk**: Риск enhancer hijacking
- **Oncogenic risk**: Риск онкогенных контактов

## Deliverables

- `src/boundary_collapse/collapse_simulator.py` - Main simulator
- `src/boundary_collapse/collapse_conditions.py` - Collapse condition models
- `src/boundary_collapse/consequence_predictor.py` - Predict consequences
- `src/boundary_collapse/risk_scorer.py` - Risk scoring system
- `config/boundary_collapse.yaml` - Configuration
- `tests/test_boundary_collapse.py` - Unit tests
- `examples/collapse_simulation_example.py` - Example usage

## Integration

Интегрируется с:
- `boundary_stability` - Использует стабильность для предсказания коллапса
- `epigenetic_compiler` - Метилирование как триггер
- `te_grammar` - TE insertions как триггер
- `nonB_logic` - Non-B DNA как триггер
- `archcode_core` - Изменение топологии после коллапса

## Constraints

- Модульная архитектура
- YAML-driven configuration
- Stochastic simulation (вероятностные события)
- Production-quality code
- Test coverage ≥60%

## Dependencies

- Boundary stability predictions
- Epigenetic data (methylation)
- TE annotation data
- Non-B DNA predictions
- Gene annotation (для enhancer/promoter mapping)

## Success Criteria

- Simulator predicts collapse events with >70% accuracy
- Consequences prediction identifies known oncogenic contacts
- Risk scores correlate with experimental data
- Clean integration with all ARCHCODE modules
- Full test coverage ≥60%

## Engineering Unknowns

- Exact collapse thresholds
- Temporal dynamics of collapse
- Enhancer-promoter interaction rules
- Oncogenic contact prediction accuracy








