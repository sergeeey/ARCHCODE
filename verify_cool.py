import cooler
import os

# –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É (—Ç–æ—Ç –∂–µ, —á—Ç–æ –≤ —Å–∫—Ä–∏–ø—Ç–µ –∑–∞–≥—Ä—É–∑–∫–∏)
FILE_PATH = "data/real_hic/WT/Rao2014_GM12878.mcool"


def verify():
    print(f"üî¨ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–∞: {FILE_PATH}")
    
    if not os.path.exists(FILE_PATH):
        print("‚ùå –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω! –°–Ω–∞—á–∞–ª–∞ –∑–∞–ø—É—Å—Ç–∏ download_cool.py")
        return

    try:
        # 1. –°–Ω–∞—á–∞–ª–∞ –ø–æ—Å–º–æ—Ç—Ä–∏–º —Å–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –≤–Ω—É—Ç—Ä–∏ —Ñ–∞–π–ª–∞ (—ç—Ç–æ –∫–∞–∫ –ø–∞–ø–∫–∏)
        # cooler.fileops.list_coolers –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É mcool
        print("–°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π:")
        available_res = cooler.fileops.list_coolers(FILE_PATH)
        for res in available_res:
            print(f" - {res}")
            
        # 2. –ü–æ–ø—Ä–æ–±—É–µ–º –æ—Ç–∫—Ä—ã—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ 1Mb (–æ–±—ã—á–Ω–æ —ç—Ç–æ /resolutions/1000000)
        # –ë–µ—Ä–µ–º –ø–µ—Ä–≤–æ–µ –ø–æ–ø–∞–≤—à–µ–µ—Å—è –∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ
        uri = f"{FILE_PATH}::/resolutions/1000000" 
        
        c = cooler.Cooler(uri)
        print(f"\n‚úÖ –£—Å–ø–µ—à–Ω–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è 1Mb!")
        print(f"üß¨ –ì–µ–Ω–æ–º: {c.info.get('genome-assembly', 'Unknown')}")
        print(f"üì¶ –ë–∏–Ω–æ–≤ (bins): {c.info['nbins']}")
        print(f"üîó –ö–æ–Ω—Ç–∞–∫—Ç–æ–≤ (nnz): {c.info['nnz']}")
        
        # 3. –ß–∏—Ç–∞–µ–º –∫—É—Å–æ—á–µ–∫ –º–∞—Ç—Ä–∏—Ü—ã (–•—Ä–æ–º–æ—Å–æ–º–∞ 1, –ø–µ—Ä–≤—ã–µ 10x10 –±–∏–Ω–æ–≤)
        matrix_snippet = c.matrix(balance=False)[0:10, 0:10]
        print("\nüìä –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö (–º–∞—Ç—Ä–∏—Ü–∞ 10x10):")
        print(matrix_snippet)
        
        print("\nüéâ –í–ê–õ–ò–î–ê–¶–ò–Ø –ü–†–û–®–õ–ê –£–°–ü–ï–®–ù–û. ARCHCODE –ì–û–¢–û–í –ö –†–ê–ë–û–¢–ï.")

    except Exception as e:
        print(f"\n‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏: {e}")
        print("–í–æ–∑–º–æ–∂–Ω–æ, —Ñ–∞–π–ª –µ—â–µ –Ω–µ –¥–æ–∫–∞—á–∞–ª—Å—è –∏–ª–∏ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω.")


if __name__ == "__main__":
    verify()

